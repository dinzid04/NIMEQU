doctype html
html(lang="id" class="scroll-smooth")
  head
    meta(charset="UTF-8")
    meta(name="viewport" content="width=device-width, initial-scale=1.0")
    title= title || "ANIMAQU - Streaming Anime Subtitle Indonesia"
    meta(name="description" content=description || "Nonton anime subtitle Indonesia terlengkap dan terbaru")
    meta(name="keywords" content="animaqu, ANIMAQU, anime, streaming anime, subtitle indonesia, nonton anime, anime sub indo, anime indonesia, streaming anime gratis, anime terbaru, anime ongoing, anime complete, anime movie, download anime, watch anime online, anime HD, otaku indonesia, Streaming Anime Sub Indo, streaming anime, sub indo, sub indonesia")
    
    meta(name="robots" content="index, follow, max-image-preview:large, max-snippet:-1, max-video-preview:-1")
    meta(name="google-site-verification" content="KYZb3rNH5REPdVtPCSei_EhvxVJDmX7zd1KVWn49M_k")
    meta(name="language" content="Indonesian")
    meta(http-equiv="content-language" content="id-ID")
    meta(name="author" content="IkuzaDev")
    meta(name="publisher" content="D5studioID")
    meta(name="copyright" content="© 2025 ANIMAQU. All rights reserved.")
    meta(name="google-adsense-account" content="ca-pub-7452678962186302")
    link(rel="icon" href="/images/favicon.ico" onerror="this.onerror=null;this.src='https://placehold.co/400';")
    link(rel="dns-prefetch" href="//d5studio.my.id")  
    link(rel="canonical" href="https://d5studio.my.id")
    link(rel="alternate" hreflang="id" href=`https://d5studio.my.id${url || '/'}`)
    link(rel="alternate" hreflang="x-default" href=`https://d5studio.my.id${url || '/'}`)
    link(rel="icon" type="image/x-icon" href="/images/favicon.ico")
    link(rel="icon" type="image/png" sizes="32x32" href="/images/logo.png")
    link(rel="icon" type="image/png" sizes="16x16" href="/images/logo.png")
    link(rel="apple-touch-icon" sizes="180x180" href="/images/logo.png")
    link(rel="robots" href="/robots.txt")
    link(rel="sitemap" type="application/xml" href="/sitemap.xml")

    meta(http-equiv="X-UA-Compatible" content="IE=edge")
    meta(name="format-detection" content="telephone=no")
    meta(name="theme-color" content="#8b5cf6")
    meta(name="msapplication-TileColor" content="#8b5cf6")

    link(rel="preconnect" href="https://fonts.googleapis.com")
    link(rel="preconnect" href="https://fonts.gstatic.com" crossorigin)
    link(rel="preconnect" href="https://cdn.plyr.io")
    link(rel="preconnect" href="https://cdn.tailwindcss.com")
    
    meta(property="og:title" content=title)
    meta(property="og:description" content=description)
    meta(property="og:type" content="website")
    meta(property="og:url" content="https://d5studio.my.id")
    meta(property="og:site_name" content="ANIMAQU")
    meta(property="og:image" content="https://d5studio.my.id/images/logo.png")
    
    meta(name="twitter:card" content="summary_large_image")
    meta(name="twitter:title" content=title)
    meta(name="twitter:description" content=description)
    meta(name="twitter:image" content="https://d5studio.my.id/images/logo.png")
    script(type="application/ld+json").
      {
        "@context": "https://schema.org",
        "@type": "WebSite",
        "name": "ANIMAQU",
        "alternateName": "ANIMAQU - Streaming Anime Sub Indo",
        "url": "https://d5studio.my.id",
        "description": "Platform streaming anime subtitle Indonesia terlengkap dan terbaru. Nikmati ribuan anime berkualitas tinggi dengan subtitle Indonesia.",
        "inLanguage": "id-ID",
        "publisher": {
          "@type": "Organization",
          "name": "ANIMAQU",
          "url": "https://d5studio.my.id",
          "logo": {
            "@type": "ImageObject",
            "url": "https://d5studio.my.id/images/logo.png",
            "width": 400,
            "height": 400
          }
        },
        "potentialAction": {
          "@type": "SearchAction",
          "target": {
            "@type": "EntryPoint",
            "urlTemplate": "https://d5studio.my.id/search?q={search_term_string}"
          },
          "query-input": "required name=search_term_string"
        },
        "sameAs": [
          "https://twitter.com/ANIMAQU",
          "https://facebook.com/ANIMAQU"
        ]
      }
    script(type="application/ld+json").
        {
          "@context": "https://schema.org",
          "@type": "Organization",
          "name": "ANIMAQU",
          "url": "https://d5studio.my.id",
          "logo": "https://d5studio.my.id/images/logo.png",
          "sameAs": [
              "https://www.facebook.com/rrq.ikz",
              "https://www.instagram.com/d5studio"
          ],
          "contactPoint": {
              "@type": "ContactPoint",
              "telephone": "+62-8578-1866-785",
              "contactType": "customer service",
              "areaServed": "ID"
          }
        }
    
    link(rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.css")
    link(rel="stylesheet" href="https://cdn.plyr.io/3.7.8/plyr.css")
    script(src="https://cdn.jsdelivr.net/npm/swiper@12/swiper-bundle.min.js")
    script(src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js")
    script(src='https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js')
    script(async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-7452678962186302" crossorigin="anonymous")
    script(src="https://cdn.tailwindcss.com/3.4.17")
    script.
      tailwind.config = {
        darkMode: 'class',
        theme: {
          extend: {
            colors: {
              primary: {
                50: '#f5f3ff',
                100: '#ede9fe',
                200: '#ddd6fe',
                300: '#c4b5fd',
                400: '#a78bfa',
                500: '#8b5cf6',
                600: '#7c3aed',
                700: '#6d28d9',
                800: '#5b21b6',
                900: '#4c1d95'
              }
            },
            fontFamily: {
              'sans': ['Inter', 'system-ui', 'sans-serif']
            }
          }
        }
      }
    
    style.
      @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
      
      .anime-card {
        transition: all 0.3s ease;
      }
      
      .anime-card:hover {
        transform: translateY(-4px);
      }
      
      .video-player {
        aspect-ratio: 16/9;
        background: #000;
      }
      
      .search-suggestions {
        max-height: 300px;
        overflow-y: auto;
      }
      
      .ad-slot {
        min-height: 50px;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .hero-pagination .swiper-pagination-bullet {
        background-color: rgba(255, 255, 255, 0.5);
        width: 12px;
        height: 12px;
        transition: all 0.3s ease;
        opacity: 0.6;
      }
      .hero-pagination .swiper-pagination-bullet-active {
        background-color: #fff;
        width: 32px;
        border-radius: 9999px;
        opacity: 1;
      }
      .hero-nav {
        color: #fff;
        background-color: rgba(0, 0, 0, 0.3);
        width: 50px;
        height: 50px;
        border-radius: 9999px;
        transition: all 0.3s ease;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .hero-nav:hover {
        background-color: rgba(0, 0, 0, 0.5);
      }
      .hero-nav::after {
        font-size: 24px;
        font-weight: bold;
      }

  body(class="bg-gray-50 dark:bg-gray-900 text-gray-900 dark:text-gray-100 font-sans transition-colors duration-300")
    header(class="bg-white dark:bg-gray-800 shadow-sm border-b border-gray-200 dark:border-gray-700 sticky top-0 z-50 rounded-b-lg justify-between transition-colors duration-300")
      nav(class="container mx-auto px-8 py-4")
        div(class="flex items-center justify-between")
          a(href="/" class="flex items-center")
            img(src="/images/logo.png" alt="ANIMAQU" class="h-8 w-auto rounded-sm", onerror="this.onerror=null;this.src='https://placehold.co/400?text=ANIMAQU';")
          
          div(class="hidden md:flex items-center space-x-6")
            a(href="/" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'home' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Home
            a(href="/ongoing" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'ongoing' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Ongoing
            a(href="/complete" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'complete' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Complete
            a(href="/genres" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'genres' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Genre
            a(href="/movies" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'movies' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Movie
            a(href="/comic" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'comic' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Comic

          div(class="flex-1 max-w-md mx-6 relative")
            form(action="/search" method="GET" class="relative")
              input(
                type="text" 
                name="q" 
                placeholder="Cari anime..." 
                value=keyword || ""
                class="w-full px-4 py-2 pl-10 pr-4 border border-gray-300 dark:border-gray-600 rounded-lg bg-white dark:bg-gray-700 text-gray-900 dark:text-gray-100 focus:ring-2 focus:ring-primary-500 focus:border-transparent transition-colors duration-200"
                autocomplete="off"
                id="searchInput"
              )
              button(type="submit" class="absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 dark:text-gray-500")
                svg(class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                  path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z")
            
            div(id="searchSuggestions" class="absolute top-full left-0 right-0 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-700 rounded-lg shadow-lg mt-1 hidden search-suggestions z-50")
          
          div(class="flex items-center space-x-2")
            button(id="darkModeToggle" class="p-2 rounded-lg bg-gray-100 dark:bg-gray-700 hover:bg-gray-200 dark:hover:bg-gray-600 transition-colors duration-200")
              svg(id="sunIcon" class="w-5 h-5 text-yellow-500 dark:hidden" fill="currentColor" viewBox="0 0 20 20")
                path(fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd")
              svg(id="moonIcon" class="w-5 h-5 text-gray-300 hidden dark:block" fill="currentColor" viewBox="0 0 20 20")
                path(d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z")
            
            button(id="mobileMenuBtn" class="md:hidden p-2 text-gray-600 dark:text-gray-300")
              svg(class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24")
                path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16")
        
        div(id="mobileMenu" class="md:hidden hidden mt-4 pb-4 border-t border-gray-200 dark:border-gray-700")
          div(class="flex flex-col space-y-3 pt-4")
            a(href="/" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'home' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Beranda
            a(href="/ongoing" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'ongoing' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Ongoing
            a(href="/complete" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'complete' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Complete
            a(href="/genres" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'genres' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Genre
            a(href="/movies" class=`text-gray-600 dark:text-gray-300 hover:text-primary-600 dark:hover:text-primary-400 transition-colors ${currentPage === 'movies' ? 'text-primary-600 dark:text-primary-400 font-medium' : ''}`) Movies

    main(class="min-h-screen")
      block content

    footer(class="bg-gray-900 dark:bg-gray-950 text-white mt-12 transition-colors duration-300")
      div(class="container mx-auto px-4 py-8")
        div(class="grid grid-cols-1 md:grid-cols-4 gap-8")
          div(class="col-span-1 md:col-span-2")
            div(class="flex items-center space-x-2 mb-4")
              img(src="/images/logo.png" alt="ANIMAQU" class="h-8 w-auto" onerror="this.onerror=null;this.src='https://placehold.co/400?text=ANIMAQU';")
              span(class="text-xl font-bold") ANIMAQU
            p(class="text-gray-400 mb-4") Platform streaming anime subtitle Indonesia terlengkap dan terbaru. Nikmati ribuan anime berkualitas tinggi dengan subtitle Indonesia.
            div(class="flex space-x-4")
              a(href="#" class="text-gray-400 hover:text-white transition-colors")
                svg(class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24")
                  path(d="M24 4.557c-.883.392-1.832.656-2.828.775 1.017-.609 1.798-1.574 2.165-2.724-.951.564-2.005.974-3.127 1.195-.897-.957-2.178-1.555-3.594-1.555-3.179 0-5.515 2.966-4.797 6.045-4.091-.205-7.719-2.165-10.148-5.144-1.29 2.213-.669 5.108 1.523 6.574-.806-.026-1.566-.247-2.229-.616-.054 2.281 1.581 4.415 3.949 4.89-.693.188-1.452.232-2.224.084.626 1.956 2.444 3.379 4.6 3.419-2.07 1.623-4.678 2.348-7.29 2.04 2.179 1.397 4.768 2.212 7.548 2.212 9.142 0 14.307-7.721 13.995-14.646.962-.695 1.797-1.562 2.457-2.549z")
              a(href="#" class="text-gray-400 hover:text-white transition-colors")
                svg(class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24")
                  path(d="M22.46 6c-.77.35-1.6.58-2.46.69.88-.53 1.56-1.37 1.88-2.38-.83.5-1.75.85-2.72 1.05C18.37 4.5 17.26 4 16 4c-2.35 0-4.27 1.92-4.27 4.29 0 .34.04.67.11.98C8.28 9.09 5.11 7.38 3 4.79c-.37.63-.58 1.37-.58 2.15 0 1.49.75 2.81 1.91 3.56-.71 0-1.37-.2-1.95-.5v.03c0 2.08 1.48 3.82 3.44 4.21a4.22 4.22 0 0 1-1.93.07 4.28 4.28 0 0 0 4 2.98 8.521 8.521 0 0 1-5.33 1.84c-.34 0-.68-.02-1.02-.06C3.44 20.29 5.7 21 8.12 21 16 21 20.33 14.46 20.33 8.79c0-.19 0-.37-.01-.56.84-.6 1.56-1.36 2.14-2.23z")

    if showCookieConsent
      div(id="cookieConsent" class="fixed top-4 left-1/2 -translate-x-1/2 w-full max-w-lg bg-white border border-gray-200 rounded-lg shadow-lg p-4 z-50 dark:bg-gray-800 dark:border-gray-700")
        div(class="flex items-start space-x-3")
          div(class="flex-shrink-0")
            svg(class="w-5 h-5 text-primary-600 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24")
              path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
          div(class="flex-1")
            p(class="text-sm text-gray-600 mb-3") Website ini menggunakan cookie untuk meningkatkan pengalaman browsing Anda.
            div(class="flex space-x-2")
              button(id="acceptCookies" class="px-3 py-1 bg-primary-600 text-white text-sm rounded hover:bg-primary-700 transition-colors") Terima
              button(id="declineCookies" class="px-3 py-1 bg-gray-200 text-gray-700 text-sm rounded hover:bg-gray-300 transition-colors") Tolak

    script.
      const darkModeToggle = document.getElementById('darkModeToggle');
      const html = document.documentElement;
      
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark' || (!savedTheme && window.matchMedia('(prefers-color-scheme: dark)').matches)) {
        html.classList.add('dark');
      }
      
      darkModeToggle?.addEventListener('click', function() {
        html.classList.toggle('dark');
        localStorage.setItem('theme', html.classList.contains('dark') ? 'dark' : 'light');
      });

      document.getElementById('mobileMenuBtn')?.addEventListener('click', function() {
        const menu = document.getElementById('mobileMenu');
        menu.classList.toggle('hidden');
      });

      const searchInput = document.getElementById('searchInput');
      const searchSuggestions = document.getElementById('searchSuggestions');
      let searchTimeout;

      searchInput?.addEventListener('input', function() {
        const query = this.value.trim();
        
        clearTimeout(searchTimeout);
        
        if (query.length < 2) {
          searchSuggestions.classList.add('hidden');
          return;
        }
        
        searchTimeout = setTimeout(() => {
          fetch(`/api/search/suggestions?q=${encodeURIComponent(query)}`)
            .then(response => response.json())
            .then(data => {
              if (data.suggestions && data.suggestions.length > 0) {
                searchSuggestions.innerHTML = data.suggestions.map(anime => 
                  `<a href="/anime/${anime.slug}" class="flex items-center space-x-3 p-3 hover:bg-gray-50 border-b border-gray-100 last:border-b-0">
                    <img src="${anime.poster}" alt="${anime.title}" class="w-10 h-14 object-cover rounded" onerror="this.onerror=null;this.src='https://placehold.co/400x560?text=No+Image';">
                    <span class="text-sm font-medium text-gray-900">${anime.title}</span>
                  </a>`
                ).join('');
                searchSuggestions.classList.remove('hidden');
              } else {
                searchSuggestions.classList.add('hidden');
              }
            })
            .catch(() => {
              searchSuggestions.classList.add('hidden');
            });
        }, 300);
      });

      document.addEventListener('click', function(e) {
        if (!searchInput?.contains(e.target) && !searchSuggestions?.contains(e.target)) {
          searchSuggestions?.classList.add('hidden');
        }
      });

      document.getElementById('acceptCookies')?.addEventListener('click', function() {
        fetch('/cookie-consent', { method: 'POST' })
          .then(() => {
            document.getElementById('cookieConsent').style.display = 'none';
          });
      });

      document.getElementById('declineCookies')?.addEventListener('click', function() {
        document.getElementById('cookieConsent').style.display = 'none';
      });

    script(src="https://cdn.plyr.io/3.7.8/plyr.polyfilled.js")
    
    if adsenseEnabled
      script(async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-xxxxxxxxxx" crossorigin="anonymous")
      script.
        (adsbygoogle = window.adsbygoogle || []).push({});

    // Bottom Navigation for Mobile
    div(class="md:hidden fixed bottom-0 left-0 right-0 bg-white dark:bg-gray-800 border-t border-gray-200 dark:border-gray-700 z-50")
      div(class="flex justify-around items-center h-16")
        a(href="/" class="flex flex-col items-center justify-center text-xs w-full " + (currentPage === 'home' ? 'text-primary-600' : 'text-gray-500 dark:text-gray-400'))
          svg(class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6")
          span Beranda
        a(href="/ongoing" class="flex flex-col items-center justify-center text-xs w-full " + (currentPage === 'ongoing' ? 'text-primary-600' : 'text-gray-500 dark:text-gray-400'))
          svg(class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h5V4H4zm0 12h5v-5H4v5zm12 0h5v-5h-5v5zM16 4v5h5V4h-5z")
          span Ongoing
        a(href="/complete" class="flex flex-col items-center justify-center text-xs w-full " + (currentPage === 'complete' ? 'text-primary-600' : 'text-gray-500 dark:text-gray-400'))
          svg(class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z")
          span Complete
        a(href="/genres" class="flex flex-col items-center justify-center text-xs w-full " + (currentPage === 'genres' ? 'text-primary-600' : 'text-gray-500 dark:text-gray-400'))
          svg(class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10")
          span Genre
        a(href="/comic" class="flex flex-col items-center justify-center text-xs w-full " + (currentPage === 'comic' ? 'text-primary-600' : 'text-gray-500 dark:text-gray-400'))
          svg(class="w-6 h-6 mb-1" fill="none" stroke="currentColor" viewBox="0 0 24 24")
            path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z")
          span Comic

  block scripts

  if currentPage === 'comic'
    script.
      const comicApiUrl = 'https://www.sankavollerei.com/comic';

      function navigateToComicPage(page) {
        const homePage = document.getElementById('homePage');
        const searchPage = document.getElementById('searchPage');
        const detailPage = document.getElementById('detailPage');
        const readerPage = document.getElementById('readerPage');

        if (homePage) homePage.style.display = 'none';
        if (searchPage) searchPage.style.display = 'none';
        if (detailPage) detailPage.style.display = 'none';
        if (readerPage) readerPage.style.display = 'none';

        switch (page) {
          case 'home':
            if (homePage) homePage.style.display = 'block';
            break;
          case 'latest':
            if (searchPage) {
              searchPage.style.display = 'block';
              document.querySelector('#searchPage h1').textContent = 'Manhwa Terbaru';
              loadLatestPage();
            }
            break;
          case 'popular':
            if (searchPage) {
              searchPage.style.display = 'block';
              document.querySelector('#searchPage h1').textContent = 'Manhwa Populer';
              loadPopularPage();
            }
            break;
          case 'top-weekly':
             if (searchPage) {
              searchPage.style.display = 'block';
              document.querySelector('#searchPage h1').textContent = 'Top Mingguan';
              loadTopWeeklyPage();
            }
            break;
        }
      }

      document.addEventListener('DOMContentLoaded', () => {
        if (document.getElementById('homePage')) {
          initComicPage();
        }
      });

      function initComicPage() {
        const homePage = document.getElementById('homePage');
        if (!homePage) return;

        loadHomePage();

        document.querySelectorAll('.view-all').forEach(el => {
          el.addEventListener('click', (e) => {
            e.preventDefault();
            const page = e.target.getAttribute('href').substring(1);
            navigateToComicPage(page);
          });
        });
      }

      async function loadHomePage() {
        showSkeletons();
        try {
          const response = await fetch(`${comicApiUrl}/kiryuu/home`);
          const data = await response.json();
          if (data.success) {
            populateSlider(data.trending.slice(0, 5));
            const latestResponse = await fetch(`${comicApiUrl}/kiryuu/latest`);
            const latestData = await latestResponse.json();
            if (latestData.success) {
              populateLatestGrid(latestData.results.slice(0, 12));
            }
            populateGrid(document.getElementById('popularGrid'), data.popularManhwa.slice(0, 8));
            populateGrid(document.getElementById('topRatedGrid'), data.trending.slice(0, 8));
          } else {
            showError('Gagal memuat data komik.');
          }
        } catch (error) {
          showError('Gagal memuat data komik. Silakan coba lagi.');
        }
      }

      function showSkeletons() {
        const sliderContainer = document.getElementById('sliderContainer');
        if (sliderContainer) {
          sliderContainer.innerHTML = '';
          for (let i = 0; i < 3; i++) {
            sliderContainer.innerHTML += '<div class="slide skeleton skeleton-slide"></div>';
          }
        }
        const grids = [document.getElementById('latestGrid'), document.getElementById('popularGrid'), document.getElementById('topRatedGrid')];
        grids.forEach(grid => {
          if (grid) {
            grid.innerHTML = '';
            for (let i = 0; i < 8; i++) {
              grid.innerHTML += '<div class="card skeleton skeleton-card"></div>';
            }
          }
        });
      }

      function populateSlider(items) {
        const sliderContainer = document.getElementById('sliderContainer');
        if (!sliderContainer) return;
        sliderContainer.innerHTML = '';
        items.forEach(item => {
          const slide = document.createElement('div');
          slide.className = 'slide';
          slide.innerHTML = `
            <img src="${item.imageSrc}" alt="${item.title}">
            <div class="slide-content">
                <div class="slide-title">${item.title}</div>
                <div class="slide-info">
                    <span>⭐ ${item.rating}</span>
                    <span>${item.latestChapter}</span>
                </div>
            </div>`;
          sliderContainer.appendChild(slide);
        });
      }

      function populateLatestGrid(items) {
        const latestGrid = document.getElementById('latestGrid');
        if (!latestGrid) return;
        latestGrid.innerHTML = '';
        items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="card-image">
                <img src="${item.imageSrc}" alt="${item.title}" onerror="this.src='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';">
                <div class="card-rating">⭐ ${item.rating || '-'}</div>
            </div>
            <div class="card-content">
                <div class="card-title">${item.title}</div>
                <div class="card-info"><span>${item.chapter || ''}</span></div>
            </div>`;
          latestGrid.appendChild(card);
        });
      }

      function populateGrid(grid, items) {
        if (!grid) return;
        grid.innerHTML = '';
        items.forEach(item => {
          const card = document.createElement('div');
          card.className = 'card';
          card.innerHTML = `
            <div class="card-image">
                <img src="${item.imageSrc || item.image}" alt="${item.title}" onerror="this.src='data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=';">
                <div class="card-rating">⭐ ${item.rating || '-'}</div>
            </div>
            <div class="card-content">
                <div class="card-title">${item.title}</div>
                <div class="card-info"><span>${item.latestChapter || item.chapter || ''}</span></div>
            </div>`;
          grid.appendChild(card);
        });
      }

      function showError(message) {
        const container = document.querySelector('.container');
        if (container) {
          container.innerHTML = `
            <div class="error-state">
                <div class="error-icon">⚠️</div>
                <div class="error-title">Terjadi Kesalahan</div>
                <div class="error-message">${message}</div>
                <button class="btn btn-primary" onclick="location.reload()">Coba Lagi</button>
            </div>`;
        }
      }

      async function loadLatestPage() {
        const searchGrid = document.getElementById('searchGrid');
        const searchInfo = document.getElementById('searchInfo');
        if (!searchGrid || !searchInfo) return;
        searchGrid.innerHTML = '';
        searchInfo.textContent = 'Memuat manhwa terbaru...';
        const response = await fetch(`${comicApiUrl}/kiryuu/latest`);
        const data = await response.json();
        if (data.success) {
          searchInfo.textContent = `Menampilkan ${data.results.length} manhwa terbaru`;
          populateGrid(searchGrid, data.results);
        } else {
          searchInfo.textContent = 'Gagal memuat manhwa terbaru';
        }
      }

      async function loadPopularPage() {
        const searchGrid = document.getElementById('searchGrid');
        const searchInfo = document.getElementById('searchInfo');
        if (!searchGrid || !searchInfo) return;
        searchGrid.innerHTML = '';
        searchInfo.textContent = 'Memuat manhwa populer...';
        const response = await fetch(`${comicApiUrl}/kiryuu/popular`);
        const data = await response.json();
        if (data.success) {
          searchInfo.textContent = `Menampilkan ${data.results.length} manhwa populer`;
          populateGrid(searchGrid, data.results);
        } else {
          searchInfo.textContent = 'Gagal memuat manhwa populer';
        }
      }

      async function loadTopWeeklyPage() {
        const searchGrid = document.getElementById('searchGrid');
        const searchInfo = document.getElementById('searchInfo');
        if (!searchGrid || !searchInfo) return;
        searchGrid.innerHTML = '';
        searchInfo.textContent = 'Memuat top mingguan...';
        const response = await fetch(`${comicApiUrl}/kiryuu/top-weekly`);
        const data = await response.json();
        if (data.success) {
          searchInfo.textContent = `Menampilkan ${data.recommendations.length} top mingguan`;
          populateGrid(searchGrid, data.recommendations);
        } else {
          searchInfo.textContent = 'Gagal memuat top mingguan';
        }
      }