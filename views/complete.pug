extends layout

block content
  div(class="container mx-auto px-4 sm:px-6 lg:px-8 py-8 animate-fade-in")
    //- Page Header
    section(class="mb-8")
      div(class="text-center md:text-left")
        h1(class="text-3xl md:text-4xl font-extrabold text-white") Anime Tamat (Complete)
        p(class="mt-2 text-lg text-gray-400") Semua episode sudah tersedia, siap untuk maraton.

    //- Anime List
    if animeList && animeList.length > 0
      div(class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 gap-4 md:gap-6 mb-8")
        each anime, index in animeList
          div(class="group perspective-1000 animate-slide-up" style=`animation-delay: ${index * 50}ms;`)
            a(href=`/anime/${anime.slug}` class="block transform-style-3d transition-transform duration-500 group-hover:-translate-y-2 group-hover:rotate-x-3")
              div(class="relative aspect-[2/3] bg-gray-800 rounded-xl shadow-lg group-hover:shadow-2xl group-hover:shadow-primary-900/50 overflow-hidden transform-style-3d transition-all duration-500 group-hover-glow")
                img(src=anime.poster alt=anime.title class="w-full h-full object-cover transition-transform duration-500 group-hover:scale-110" loading="lazy" onerror="this.onerror=null;this.src='https://placehold.co/400x600?text=Error';")
                div(class="absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent")
                div(class="absolute inset-0 flex flex-col justify-end p-4")
                  h3(class="font-bold text-sm text-white line-clamp-2 leading-tight")= anime.title
                  if anime.rating
                    div(class="flex items-center gap-1 mt-1")
                      svg(class="w-3 h-3 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"): path(d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z")
                      p(class="text-xs text-gray-300 font-medium")= anime.rating
                div(class="absolute top-2 left-2 bg-green-500/80 backdrop-blur-sm text-white text-xs font-bold px-2 py-1 rounded-md") Complete

      //- Pagination
      if pagination && pagination.last_visible_page > 1
        nav(class="flex justify-center mt-12")
          div(class="flex items-center space-x-2 bg-gray-900/80 border border-gray-800 rounded-lg p-2")
            //- Previous Button
            if pagination.current_page > 1
              a(href=`/complete?page=${pagination.current_page - 1}` class="px-3 py-2 text-sm text-gray-300 rounded-md hover:bg-gray-800 transition-colors") Sebelumnya
            else
              span(class="px-3 py-2 text-sm text-gray-600 rounded-md cursor-not-allowed") Sebelumnya

            //- Page Numbers
            - const maxPagesToShow = 5;
            - let startPage = Math.max(1, pagination.current_page - Math.floor(maxPagesToShow / 2));
            - let endPage = Math.min(pagination.last_visible_page, startPage + maxPagesToShow - 1);
            - if (endPage - startPage + 1 < maxPagesToShow) { startPage = Math.max(1, endPage - maxPagesToShow + 1); }

            if startPage > 1
              a(href=`/complete?page=1` class="px-3 py-2 text-sm text-gray-300 rounded-md hover:bg-gray-800 transition-colors") 1
              if startPage > 2
                span(class="px-3 py-2 text-sm text-gray-500") ...

            each page in Array.from({length: endPage - startPage + 1}, (_, i) => startPage + i)
              if page === pagination.current_page
                span(class="px-3 py-2 text-sm text-white bg-primary-600 rounded-md font-bold")= page
              else
                a(href=`/complete?page=${page}` class="px-3 py-2 text-sm text-gray-300 rounded-md hover:bg-gray-800 transition-colors")= page

            if endPage < pagination.last_visible_page
              if endPage < pagination.last_visible_page - 1
                span(class="px-3 py-2 text-sm text-gray-500") ...
              a(href=`/complete?page=${pagination.last_visible_page}` class="px-3 py-2 text-sm text-gray-300 rounded-md hover:bg-gray-800 transition-colors")= pagination.last_visible_page

            //- Next Button
            if pagination.has_next_page
              a(href=`/complete?page=${pagination.current_page + 1}` class="px-3 py-2 text-sm text-gray-300 rounded-md hover:bg-gray-800 transition-colors") Selanjutnya
            else
              span(class="px-3 py-2 text-sm text-gray-600 rounded-md cursor-not-allowed") Selanjutnya

    else
      //- No Anime Found Message
      div(class="text-center py-20")
        svg(class="w-16 h-16 text-gray-700 mx-auto mb-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"): path(stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z")
        h3(class="text-xl font-semibold text-white mb-2") Belum Ada Anime
        p(class="text-gray-400") Data anime complete belum tersedia. Silakan cek kembali nanti.

    //- Ads
    if adSlots && adSlots.contentBottom && adSlots.contentBottom.length > 0
      div(class="mt-12")
        each ad in adSlots.contentBottom
          div(class="ad-slot bg-gray-800 rounded-xl shadow-lg")!= ad.content